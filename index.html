<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>t-tasks</title>
	<meta name="description" content="Documentation for t-tasks">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">t-tasks</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>t-tasks</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p><img src="https://github.com/lammonaaf/t-ask/workflows/CI/badge.svg?branch=master" alt="CI"></p>
				<a href="#t-tasks-task-library" id="t-tasks-task-library" style="color: inherit; text-decoration: none;">
					<h1>T-Tasks task library</h1>
				</a>
				<p>T-Tasks provides a Task quasi-monad, allowing to schedule, cancel and externally reject async operations in a composable, semi-functional way.</p>
				<p>Sometimes (for example, within React hooks) you need to cancel any ongoing asynchronous operation to prevent side-effects. Switching from async functions to chained tasks one can simply cancel current task execution ensuring that the operation will be cancelled at the nearest spot, preventing any unwanted side efects afterwards.</p>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<a href="#prevent-side-effects-after-async-function" id="prevent-side-effects-after-async-function" style="color: inherit; text-decoration: none;">
					<h3>Prevent side-effects after async function</h3>
				</a>
				<p>Keep in mind, that pure promises are still not cancelable, so the original function will still finish. In this scenario we can only elliminate side effects within task composition chain.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> task = liftPromise(someAsyncFunction())
  .fmap(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    setSomething(result); <span class="hljs-comment">// side-effects</span>
  });

task.cancel(); <span class="hljs-comment">// prevent unwanted side effects</span></code></pre>
				<a href="#chain-multiple-async-functions-togeter" id="chain-multiple-async-functions-togeter" style="color: inherit; text-decoration: none;">
					<h3>Chain multiple async functions togeter</h3>
				</a>
				<p>In this scenario if one cancels the task during first operation, the seconf one would not be initiated at all</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> task = liftPromise(someAsyncFunction())
  .chain(<span class="hljs-function">(<span class="hljs-params">result1</span>) =&gt;</span> otherAsyncFunction(result1))
  .fmap(<span class="hljs-function">(<span class="hljs-params">result2</span>) =&gt;</span> {
    setSomething(result); <span class="hljs-comment">// side-effects</span>
  });

task.cancel(); <span class="hljs-comment">// prevent unwanted side effects</span></code></pre>
				<a href="#chain-multiple-async-functions-via-generator" id="chain-multiple-async-functions-via-generator" style="color: inherit; text-decoration: none;">
					<h3>Chain multiple async functions via generator</h3>
				</a>
				<p>In this scenario is identical to the previous one except of using generator syntax. Note usage of <code>castPromiseFunction</code> it is required due to typescript being unable to predict types correctly. The library provides some ready-to use convinience casting functions, however even a <code>() as Something</code> is enough.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> task = generateTask(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> result1 = castPromiseFunction&lt;<span class="hljs-keyword">typeof</span> someAsyncFunction&gt;(
    <span class="hljs-keyword">yield</span> liftPromise(someAsyncFunction()),
  );

  <span class="hljs-keyword">const</span> result2 = castPromiseFunction&lt;<span class="hljs-keyword">typeof</span> otherAsyncFunction&gt;(
    <span class="hljs-keyword">yield</span> liftPromise(otherAsyncFunction(result1)),
  );

  setSomething(result2); <span class="hljs-comment">// side-effects</span>
});

task.cancel(); <span class="hljs-comment">// prevent unwanted side effects</span></code></pre>
				<a href="#throw-exceptions-straight-to-generators" id="throw-exceptions-straight-to-generators" style="color: inherit; text-decoration: none;">
					<h3>Throw exceptions straight to generators</h3>
				</a>
				<p>It is also possible to reject pending tasks manually, resulting in an immediate interruption with exception. However you still can catch that exception within the task itself and fallback if necessary.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> task = generateTask(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> result1: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">try</span> {
    result1 = castPromise&lt;<span class="hljs-built_in">number</span>&gt;(
      <span class="hljs-keyword">yield</span> liftPromise(someAsyncFunction()),
    );
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">console</span>.error(e);

    result1 = <span class="hljs-number">42</span>; <span class="hljs-comment">// Sometimes we have to give an answer in time i guess</span>
  }

  <span class="hljs-keyword">const</span> result2 = castPromiseFunction&lt;<span class="hljs-keyword">typeof</span> otherAsyncFunction&gt;(
    <span class="hljs-keyword">yield</span> liftPromise(otherAsyncFunction(result1)),
  );

  setSomething(result2); <span class="hljs-comment">// side-effects</span>
});

task.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;Stop right there&#x27;</span>)); <span class="hljs-comment">// prevent unwanted side effects</span></code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_either_.html">&quot;src/either&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_index_.html">&quot;src/index&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_maybe_.html">&quot;src/maybe&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_task_.html">&quot;src/task&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_task_tools_.html">&quot;src/task-<wbr>tools&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>